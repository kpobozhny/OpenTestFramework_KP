package pagesByDriver;

import org.apache.log4j.Logger;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.support.ui.ExpectedConditions;
import org.openqa.selenium.support.ui.WebDriverWait;
import tools.WebActions;

import java.io.IOException;

import static tools.ConfigData.ui;

/**
 * Created by kostyap on 7/25/2016.
 */
public class HomePageByDriver {

    WebDriver driver;
    WebActions webActions;
    WebDriverWait waitForCondition;
    Logger log;

    //constructor
    public HomePageByDriver(WebDriver driver) throws IOException {
        this.driver = driver;
        webActions = new WebActions(driver);
        log = Logger.getLogger(HomePageByDriver.class);
        //explicitly wait
        waitForCondition = new WebDriverWait (driver, 10 );
        //implicitly wait
        //driver.manage().timeouts().implicitlyWait(5, TimeUnit.SECONDS);
    }

    //Metod to click on "Sign out" link
    public void clickLogoutLink() throws ClassNotFoundException, IllegalAccessException, InstantiationException, IOException{
        webActions.clickButton("HomePage.LogoutLink");
        //waitForCondition.until(ExpectedConditions.presenceOfElementLocated(By.xpath(HomePageByDriver.LOGOUT_LINK)));
        waitForCondition.until(ExpectedConditions.presenceOfElementLocated(ui("LoginPage.LoginButton")));
        log.info("'Sign in' link was clicked");
    }

    //this method is used to check out that the 'Sign out' link is presented
    public boolean checkLogoutLinkPresence() throws ClassNotFoundException, IllegalAccessException, InstantiationException, IOException{
        return webActions.isElementPresented("HomePage.LogoutLink");
    }

}
